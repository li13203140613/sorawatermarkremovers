# Sora æç¤ºè¯ç”Ÿæˆç³»ç»Ÿ - è¯¦ç»†æŠ€æœ¯æ–¹æ¡ˆ

## ğŸ“‹ ç›®å½•
1. [ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ](#ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ)
2. [ç®€å•æ¨¡å¼ç¤ºä¾‹](#ç®€å•æ¨¡å¼ç¤ºä¾‹)
3. [é«˜çº§æ¨¡å¼ç¤ºä¾‹](#é«˜çº§æ¨¡å¼ç¤ºä¾‹)
4. [ç³»ç»Ÿæç¤ºè¯](#ç³»ç»Ÿæç¤ºè¯)
5. [å­—æ®µæ˜ å°„è§„åˆ™](#å­—æ®µæ˜ å°„è§„åˆ™)

---

## ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ

### æ•°æ®æµå‘
```
å‰ç«¯è¡¨å• (PromptGeneratorForm.tsx)
    â†“
API è¯·æ±‚ (/api/prompt-generator/generate-batch)
    â†“
ç”¨æˆ·æç¤ºè¯æ„å»º (deepseek.ts: buildUserPrompt)
    â†“
DeepSeek API è°ƒç”¨
    â†“
    [System Prompt] + [User Prompt]
    â†“
ç”Ÿæˆçš„ Sora æç¤ºè¯è¿”å›
```

---

## ç®€å•æ¨¡å¼ç¤ºä¾‹

### å‰ç«¯è¾“å…¥
```javascript
{
  scene: "ä¸€åªæ©˜çŒ«åœ¨é›¨å¤©èµ°åˆ°è¡—é“ä¸Š",
  category: "cinematicStory",  // ç”¨æˆ·é€‰æ‹©çš„åˆ†ç±»
  count: 3,                     // ç”Ÿæˆæ•°é‡
  language: "zh"
}
```

### API å¤„ç†æµç¨‹

#### Step 1: è·å–åˆ†ç±»é…ç½®
```javascript
// lib/prompt-generator/categories.ts
const categoryConfig = getCategoryByKey("cinematicStory");
// è¿”å›:
{
  key: 'cinematicStory',
  label: 'ç”µå½±å™äº‹',
  icon: 'ğŸ“½ï¸',
  style: 'ç”µå½±çº§ç”»è´¨ï¼Œå™äº‹æ€§å¼ºï¼Œæƒ…æ„Ÿä¸°å¯Œï¼Œæˆå‰§åŒ–æ„å›¾',
  keywords: ['cinematic', 'narrative', 'emotional', 'dramatic'],
  defaultMood: 'æˆå‰§æ€§ã€æƒ…æ„Ÿå…±é¸£'
}
```

#### Step 2: æ„å»ºç”¨æˆ·æç¤ºè¯
```javascript
// lib/prompt-generator/deepseek.ts: buildUserPrompt()
const userPrompt = `åœºæ™¯ï¼šä¸€åªæ©˜çŒ«åœ¨é›¨å¤©èµ°åˆ°è¡—é“ä¸Š
åˆ†ç±»ï¼šç”µå½±å™äº‹ï¼ˆç”µå½±çº§ç”»è´¨ï¼Œå™äº‹æ€§å¼ºï¼Œæƒ…æ„Ÿä¸°å¯Œï¼Œæˆå‰§åŒ–æ„å›¾ï¼‰
æ°›å›´ï¼šæˆå‰§æ€§ã€æƒ…æ„Ÿå…±é¸£`;
```

#### Step 3: å‘é€åˆ° DeepSeek API
```javascript
{
  model: "deepseek-ai/DeepSeek-V3.2-Exp",
  messages: [
    {
      role: "system",
      content: "ä½ æ˜¯ Sora 2 æç¤ºè¯ç”Ÿæˆå™¨ã€‚ç”¨æˆ·ä¼šç»™ä½ ä¸€ä¸ªæƒ³æ³•å’Œä¸€äº›è®¾ç½®..."
    },
    {
      role: "user",
      content: "åœºæ™¯ï¼šä¸€åªæ©˜çŒ«åœ¨é›¨å¤©èµ°åˆ°è¡—é“ä¸Š\nåˆ†ç±»ï¼šç”µå½±å™äº‹ï¼ˆç”µå½±çº§ç”»è´¨ï¼Œå™äº‹æ€§å¼ºï¼Œæƒ…æ„Ÿä¸°å¯Œï¼Œæˆå‰§åŒ–æ„å›¾ï¼‰\næ°›å›´ï¼šæˆå‰§æ€§ã€æƒ…æ„Ÿå…±é¸£"
    }
  ],
  temperature: 0.8,
  max_tokens: 400
}
```

#### Step 4: DeepSeek è¿”å›ç»“æœ
```
ä½è§’åº¦è·Ÿè¸ªé•œå¤´æ•æ‰ä¸€åªæ©˜çŒ«å°å¿ƒç¿¼ç¿¼åœ°èµ°åœ¨è¢«é›¨æ°´æµ¸æ¹¿çš„é¹…åµçŸ³å°å··ä¸­ï¼ŒçŒ«å’ªè“¬æ¾çš„æ¯›å‘è¢«ç»†é›¨æ‰“æ¹¿ï¼Œæ¯æ­¥è¸ä¸‹æ—¶è‚‰å«éƒ½åœ¨ç§¯æ°´ä¸­æ³›èµ·æ¶Ÿæ¼ªã€‚é•œå¤´ä»¥ä¿¯è§†è§’è·ŸéšçŒ«å’ªç©¿è¿‡é›¾æ°”æ°¤æ°²çš„å··é“ï¼Œä¸¤ä¾§ç –å¢™çˆ¬æ»¡é’è‹”ï¼Œè€å¼ç…¤æ°”ç¯æ™•æŸ“å‡ºæš–é»„å…‰æ–‘ã€‚çŒ«å’ªçªç„¶é©»è¶³ä»°å¤´ï¼Œèƒ¡é¡»è½»é¢¤å—…é—»ç©ºæ°”ï¼Œéšåå°è·‘æ‹è¿‡è½¬è§’ã€‚æµ…æ™¯æ·±ä¿æŒçŒ«å’ªé”åˆ©è€ŒèƒŒæ™¯è™šåŒ–ã€‚è‰²è°ƒï¼šç¥ç€é‡‘ã€ç‚­ç°ã€æ·±è“ã€‚å£°éŸ³ï¼šé›¨å£°ã€è¿œå¤„è½¦æµã€æ¹¿æ¼‰è„šæ­¥ã€‚
```

### å®Œæ•´æ—¥å¿—è¾“å‡º
```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¬ [æ‰¹é‡ç”Ÿæˆ API] æ”¶åˆ°è¯·æ±‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ è¯·æ±‚å‚æ•°:
{
  "scene": "ä¸€åªæ©˜çŒ«åœ¨é›¨å¤©èµ°åˆ°è¡—é“ä¸Š",
  "category": "cinematicStory",
  "count": 3,
  "language": "zh"
}
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… ä½¿ç”¨åˆ†ç±»: ç”µå½±å™äº‹ (cinematicStory)
   é£æ ¼: ç”µå½±çº§ç”»è´¨ï¼Œå™äº‹æ€§å¼ºï¼Œæƒ…æ„Ÿä¸°å¯Œï¼Œæˆå‰§åŒ–æ„å›¾
   æ°›å›´: æˆå‰§æ€§ã€æƒ…æ„Ÿå…±é¸£

ğŸ² æ¸©åº¦è®¾ç½®: [0.7, 0.8, 0.9]
ğŸš€ å¼€å§‹ç”Ÿæˆ 3 ä¸ªæç¤ºè¯...

â³ [æç¤ºè¯ #1] å¼€å§‹ç”Ÿæˆ (æ¸©åº¦: 0.7)...
ğŸ“¤ [DeepSeek API] å‘é€è¯·æ±‚
åœºæ™¯: ä¸€åªæ©˜çŒ«åœ¨é›¨å¤©èµ°åˆ°è¡—é“ä¸Š
åˆ†ç±»: ç”µå½±å™äº‹
é£æ ¼: ç”µå½±çº§ç”»è´¨ï¼Œå™äº‹æ€§å¼ºï¼Œæƒ…æ„Ÿä¸°å¯Œï¼Œæˆå‰§åŒ–æ„å›¾
æ°›å›´: æˆå‰§æ€§ã€æƒ…æ„Ÿå…±é¸£
æ¸©åº¦: 0.7

ğŸ“¥ [DeepSeek API] æ”¶åˆ°å“åº”
Tokenä½¿ç”¨: 789
æˆæœ¬: Â¥0.009468
ç”Ÿæˆçš„æç¤ºè¯: ä½è§’åº¦è·Ÿè¸ªé•œå¤´æ•æ‰ä¸€åªæ©˜çŒ«å°å¿ƒç¿¼ç¿¼åœ°èµ°åœ¨...

âœ… [æç¤ºè¯ #1] ç”ŸæˆæˆåŠŸ! (789 tokens, Â¥0.009468)

[é‡å¤ #2 å’Œ #3...]

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š [æ‰¹é‡ç”Ÿæˆ API] å®Œæˆæ±‡æ€»
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ¨ æ€»æ•°: 3 ä¸ª
âœ… æˆåŠŸ: 3 ä¸ª
âŒ å¤±è´¥: 0 ä¸ª
ğŸ“Š æ€»Token: 2367
ğŸ’° æ€»æˆæœ¬: Â¥0.028404 (2.8404åˆ†)
ğŸ’° å¹³å‡æˆæœ¬: Â¥0.009468/ä¸ª
â±ï¸ æ€»è€—æ—¶: 8.32ç§’
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## é«˜çº§æ¨¡å¼ç¤ºä¾‹

### å‰ç«¯è¾“å…¥ï¼ˆå®Œæ•´å­—æ®µï¼‰
```javascript
{
  scene: "ä¸€åªæ©˜çŒ«åœ¨é›¨å¤©èµ°åˆ°è¡—é“ä¸Š",
  category: "cinematicStory",

  // é«˜çº§æ¨¡å¼é¢å¤–å­—æ®µ
  style: "ç”µå½±çº§ç”»è´¨ï¼Œå™äº‹æ€§å¼º",
  duration: "8ç§’",
  mood: "æˆå‰§æ€§ã€æƒ…æ„Ÿå…±é¸£",

  // å¦‚æœå‰ç«¯æœ‰è¿™äº›å­—æ®µçš„è¯ï¼ˆæ ¹æ®ä½ çš„æˆªå›¾ï¼‰
  cameraType: "å…¨æ™¯",           // é•œå¤´ç±»å‹
  subject: "æ©˜è‰²è™æ–‘çŒ«",         // ä¸»ä½“æè¿°
  actions: "å°å¿ƒç¿¼ç¿¼åœ°èµ°è·¯",     // åŠ¨ä½œæè¿°
  environment: "è¢«é›¨æ°´æµ¸æ¹¿çš„é¹…åµçŸ³å°å··",  // ç¯å¢ƒç»†èŠ‚
  lighting: "è€å¼ç…¤æ°”ç¯æš–é»„å…‰",   // å…‰çº¿ç±»å‹
  cameraMovement: "ä½è§’åº¦è·Ÿè¸ª",   // é•œå¤´è¿åŠ¨

  count: 3,
  language: "zh"
}
```

### API å¤„ç†æµç¨‹

#### Step 1: è·å–åˆ†ç±»é…ç½®ï¼ˆåŒç®€å•æ¨¡å¼ï¼‰
```javascript
const categoryConfig = getCategoryByKey("cinematicStory");
```

#### Step 2: æ„å»ºç”¨æˆ·æç¤ºè¯ï¼ˆæ–¹æ¡ˆ A - å…¨éƒ¨æ‹¼æ¥ï¼‰
```javascript
// lib/prompt-generator/deepseek.ts: buildUserPrompt()

let userPrompt = input.scene;  // "ä¸€åªæ©˜çŒ«åœ¨é›¨å¤©èµ°åˆ°è¡—é“ä¸Š"

const additionalInfo: string[] = [];

// åŸºç¡€å­—æ®µ
if (input.style) additionalInfo.push(`é£æ ¼ï¼š${input.style}`);
if (input.duration) additionalInfo.push(`æ—¶é•¿ï¼š${input.duration}`);
if (input.mood) additionalInfo.push(`æ°›å›´ï¼š${input.mood}`);

// é«˜çº§å­—æ®µï¼ˆå¦‚æœå‰ç«¯æä¾›ï¼‰
if (input.cameraType) additionalInfo.push(`é•œå¤´ç±»å‹ï¼š${input.cameraType}`);
if (input.subject) additionalInfo.push(`ä¸»ä½“æè¿°ï¼š${input.subject}`);
if (input.actions) additionalInfo.push(`åŠ¨ä½œæè¿°ï¼š${input.actions}`);
if (input.environment) additionalInfo.push(`ç¯å¢ƒç»†èŠ‚ï¼š${input.environment}`);
if (input.lighting) additionalInfo.push(`å…‰çº¿ç±»å‹ï¼š${input.lighting}`);
if (input.cameraMovement) additionalInfo.push(`é•œå¤´è¿åŠ¨ï¼š${input.cameraMovement}`);

// æ‹¼æ¥æ‰€æœ‰ä¿¡æ¯
if (additionalInfo.length > 0) {
  userPrompt += '\n\n' + additionalInfo.join('\n');
}
```

#### Step 3: æœ€ç»ˆç”¨æˆ·æç¤ºè¯
```
åœºæ™¯ï¼šä¸€åªæ©˜çŒ«åœ¨é›¨å¤©èµ°åˆ°è¡—é“ä¸Š

é£æ ¼ï¼šç”µå½±çº§ç”»è´¨ï¼Œå™äº‹æ€§å¼º
æ—¶é•¿ï¼š8ç§’
æ°›å›´ï¼šæˆå‰§æ€§ã€æƒ…æ„Ÿå…±é¸£
é•œå¤´ç±»å‹ï¼šå…¨æ™¯
ä¸»ä½“æè¿°ï¼šæ©˜è‰²è™æ–‘çŒ«
åŠ¨ä½œæè¿°ï¼šå°å¿ƒç¿¼ç¿¼åœ°èµ°è·¯
ç¯å¢ƒç»†èŠ‚ï¼šè¢«é›¨æ°´æµ¸æ¹¿çš„é¹…åµçŸ³å°å··
å…‰çº¿ç±»å‹ï¼šè€å¼ç…¤æ°”ç¯æš–é»„å…‰
é•œå¤´è¿åŠ¨ï¼šä½è§’åº¦è·Ÿè¸ª
```

#### Step 4: å‘é€åˆ° DeepSeek API
```javascript
{
  model: "deepseek-ai/DeepSeek-V3.2-Exp",
  messages: [
    {
      role: "system",
      content: "ä½ æ˜¯ Sora 2 æç¤ºè¯ç”Ÿæˆå™¨ã€‚ç”¨æˆ·ä¼šç»™ä½ ä¸€ä¸ªæƒ³æ³•å’Œä¸€äº›è®¾ç½®..."
    },
    {
      role: "user",
      content: `åœºæ™¯ï¼šä¸€åªæ©˜çŒ«åœ¨é›¨å¤©èµ°åˆ°è¡—é“ä¸Š

é£æ ¼ï¼šç”µå½±çº§ç”»è´¨ï¼Œå™äº‹æ€§å¼º
æ—¶é•¿ï¼š8ç§’
æ°›å›´ï¼šæˆå‰§æ€§ã€æƒ…æ„Ÿå…±é¸£
é•œå¤´ç±»å‹ï¼šå…¨æ™¯
ä¸»ä½“æè¿°ï¼šæ©˜è‰²è™æ–‘çŒ«
åŠ¨ä½œæè¿°ï¼šå°å¿ƒç¿¼ç¿¼åœ°èµ°è·¯
ç¯å¢ƒç»†èŠ‚ï¼šè¢«é›¨æ°´æµ¸æ¹¿çš„é¹…åµçŸ³å°å··
å…‰çº¿ç±»å‹ï¼šè€å¼ç…¤æ°”ç¯æš–é»„å…‰
é•œå¤´è¿åŠ¨ï¼šä½è§’åº¦è·Ÿè¸ª`
    }
  ],
  temperature: 0.8,
  max_tokens: 400
}
```

#### Step 5: DeepSeek è¿”å›ç»“æœ
```
ä½è§’åº¦å…¨æ™¯è·Ÿè¸ªé•œå¤´æ•æ‰ä¸€åªæ©˜è‰²è™æ–‘çŒ«å°å¿ƒç¿¼ç¿¼åœ°èµ°åœ¨è¢«é›¨æ°´æµ¸æ¹¿çš„é¹…åµçŸ³å°å··ä¸­ï¼ŒçŒ«å’ªè“¬æ¾çš„æ¯›å‘è¢«ç»†é›¨æ‰“æ¹¿ï¼Œæ¯æ­¥è¸ä¸‹æ—¶è‚‰å«éƒ½åœ¨ç§¯æ°´ä¸­æ³›èµ·æ¶Ÿæ¼ªã€‚é•œå¤´ä»ä½è§’åº¦ä»¥ä¿¯è§†è§’æŒç»­è·ŸéšçŒ«å’ªç©¿è¿‡é›¾æ°”æ°¤æ°²çš„å··é“ï¼Œä¸¤ä¾§ç –å¢™çˆ¬æ»¡é’è‹”ï¼Œè€å¼ç…¤æ°”ç¯æŠ•å°„å‡ºæš–é»„è‰²å…‰èŠ’ï¼Œåœ¨æ¹¿æ¶¦çš„åœ°é¢ä¸Šå½¢æˆç¥ç€è‰²å…‰æ–‘ã€‚çŒ«å’ªä¿æŒç¨³å®šæ­¥ä¼å‰è¡Œï¼Œçªç„¶é©»è¶³ä»°å¤´ï¼Œèƒ¡é¡»è½»é¢¤å—…é—»ç©ºæ°”ä¸­çš„é›¨å‘³ï¼Œéšåå°è·‘å‡ æ­¥æ‹è¿‡è½¬è§’æ¶ˆå¤±åœ¨å…‰å½±äº¤é”™å¤„ã€‚å…¨æ™¯é•œå¤´ä¿æŒçŒ«å’ªä¸ç¯å¢ƒçš„å®Œæ•´æ„å›¾ï¼Œæµ…æ™¯æ·±è®©ä¸»ä½“é”åˆ©è€ŒèƒŒæ™¯æŸ”å’Œè™šåŒ–ã€‚è‰²è°ƒï¼šç¥ç€é‡‘ã€ç‚­ç°ã€æ·±è“ã€æš–é»„ã€‚å£°éŸ³ï¼šç»†é›¨æ‹æ‰“åœ°é¢ã€è¿œå¤„è½¦æµã€æ¹¿æ¼‰çš„è„šæ­¥å£°ã€‚
```

### å®Œæ•´æ—¥å¿—è¾“å‡º
```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¬ [æ‰¹é‡ç”Ÿæˆ API] æ”¶åˆ°è¯·æ±‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ è¯·æ±‚å‚æ•°:
{
  "scene": "ä¸€åªæ©˜çŒ«åœ¨é›¨å¤©èµ°åˆ°è¡—é“ä¸Š",
  "category": "cinematicStory",
  "style": "ç”µå½±çº§ç”»è´¨ï¼Œå™äº‹æ€§å¼º",
  "duration": "8ç§’",
  "mood": "æˆå‰§æ€§ã€æƒ…æ„Ÿå…±é¸£",
  "cameraType": "å…¨æ™¯",
  "subject": "æ©˜è‰²è™æ–‘çŒ«",
  "actions": "å°å¿ƒç¿¼ç¿¼åœ°èµ°è·¯",
  "environment": "è¢«é›¨æ°´æµ¸æ¹¿çš„é¹…åµçŸ³å°å··",
  "lighting": "è€å¼ç…¤æ°”ç¯æš–é»„å…‰",
  "cameraMovement": "ä½è§’åº¦è·Ÿè¸ª",
  "count": 3,
  "language": "zh"
}
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… ä½¿ç”¨åˆ†ç±»: ç”µå½±å™äº‹ (cinematicStory)
   é£æ ¼: ç”µå½±çº§ç”»è´¨ï¼Œå™äº‹æ€§å¼º
   æ°›å›´: æˆå‰§æ€§ã€æƒ…æ„Ÿå…±é¸£

ğŸ² æ¸©åº¦è®¾ç½®: [0.7, 0.8, 0.9]
ğŸš€ å¼€å§‹ç”Ÿæˆ 3 ä¸ªæç¤ºè¯...

â³ [æç¤ºè¯ #1] å¼€å§‹ç”Ÿæˆ (æ¸©åº¦: 0.7)...
ğŸ“¤ [DeepSeek API] å‘é€è¯·æ±‚
åœºæ™¯: ä¸€åªæ©˜çŒ«åœ¨é›¨å¤©èµ°åˆ°è¡—é“ä¸Š
åˆ†ç±»: ç”µå½±å™äº‹
é£æ ¼: ç”µå½±çº§ç”»è´¨ï¼Œå™äº‹æ€§å¼º
æ—¶é•¿: 8ç§’
æ°›å›´: æˆå‰§æ€§ã€æƒ…æ„Ÿå…±é¸£
é•œå¤´ç±»å‹: å…¨æ™¯
ä¸»ä½“æè¿°: æ©˜è‰²è™æ–‘çŒ«
åŠ¨ä½œæè¿°: å°å¿ƒç¿¼ç¿¼åœ°èµ°è·¯
ç¯å¢ƒç»†èŠ‚: è¢«é›¨æ°´æµ¸æ¹¿çš„é¹…åµçŸ³å°å··
å…‰çº¿ç±»å‹: è€å¼ç…¤æ°”ç¯æš–é»„å…‰
é•œå¤´è¿åŠ¨: ä½è§’åº¦è·Ÿè¸ª
æ¸©åº¦: 0.7

ğŸ“¥ [DeepSeek API] æ”¶åˆ°å“åº”
Tokenä½¿ç”¨: 892
æˆæœ¬: Â¥0.010704
ç”Ÿæˆçš„æç¤ºè¯: ä½è§’åº¦å…¨æ™¯è·Ÿè¸ªé•œå¤´æ•æ‰ä¸€åªæ©˜è‰²è™æ–‘çŒ«å°å¿ƒç¿¼ç¿¼åœ°èµ°åœ¨...

âœ… [æç¤ºè¯ #1] ç”ŸæˆæˆåŠŸ! (892 tokens, Â¥0.010704)

[é‡å¤ #2 å’Œ #3...]

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š [æ‰¹é‡ç”Ÿæˆ API] å®Œæˆæ±‡æ€»
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ¨ æ€»æ•°: 3 ä¸ª
âœ… æˆåŠŸ: 3 ä¸ª
âŒ å¤±è´¥: 0 ä¸ª
ğŸ“Š æ€»Token: 2676
ğŸ’° æ€»æˆæœ¬: Â¥0.032112 (3.2112åˆ†)
ğŸ’° å¹³å‡æˆæœ¬: Â¥0.010704/ä¸ª
â±ï¸ æ€»è€—æ—¶: 9.15ç§’
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## ç³»ç»Ÿæç¤ºè¯

### å½“å‰ç³»ç»Ÿæç¤ºè¯ï¼ˆç®€åŒ–ç‰ˆæœ¬ï¼‰
```
ä½ æ˜¯ Sora 2 æç¤ºè¯ç”Ÿæˆå™¨ã€‚ç”¨æˆ·ä¼šç»™ä½ ä¸€ä¸ªæƒ³æ³•å’Œä¸€äº›è®¾ç½®ï¼Œä½ çš„ä»»åŠ¡æ˜¯ç”Ÿæˆä¸€ä¸ªä¸“ä¸šçš„ Sora è§†é¢‘æç¤ºè¯ã€‚

## ç”Ÿæˆè§„åˆ™

### 1. è¯­è¨€åŒ¹é…
- å¦‚æœç”¨æˆ·è¾“å…¥æ˜¯ä¸­æ–‡ â†’ ç”Ÿæˆä¸­æ–‡æç¤ºè¯
- å¦‚æœç”¨æˆ·è¾“å…¥æ˜¯è‹±æ–‡ â†’ ç”Ÿæˆè‹±æ–‡æç¤ºè¯

### 2. è¾“å‡ºæ ¼å¼
- ç”Ÿæˆä¸€ä¸ª 150-250 è¯çš„æµç•…æ®µè½
- è‡ªç„¶èå…¥ï¼šé•œå¤´ç±»å‹ã€åœºæ™¯ç»†èŠ‚ã€æ‘„å½±æŠ€æœ¯ã€åŠ¨ä½œã€æ°›å›´
- ä¸è¦ä½¿ç”¨ç»“æ„åŒ–æ ‡é¢˜ï¼ˆå¦‚ "**Style:**"ï¼‰

### 3. æ ¸å¿ƒæŠ€å·§
- **ä¸€é•œä¸€åŠ¨**ï¼šæ¯ä¸ªé•œå¤´åªæœ‰ä¸€ä¸ªä¸»è¦åŠ¨ä½œ
- **å…·ä½“æè¿°**ï¼šç”¨å¯è§†åŒ–çš„åè¯å’ŒåŠ¨è¯ï¼ˆ"wet cobblestone" ä¸æ˜¯ "beautiful street"ï¼‰
- **æ—¶é•¿åŒ¹é…**ï¼š4ç§’=1-2ä¸ªåŠ¨ä½œï¼Œ8ç§’=3-4ä¸ªåŠ¨ä½œ

### 4. ç¤ºä¾‹

âŒ åç¤ºä¾‹ï¼š
ä¸€åªçŒ«åœ¨è¡—ä¸Šèµ°ã€‚é•œå¤´ï¼šwide shot

âœ… å¥½ç¤ºä¾‹ï¼ˆä¸­æ–‡ï¼‰ï¼š
ä½è§’åº¦è·Ÿè¸ªé•œå¤´æ•æ‰ä¸€åªæ©˜çŒ«å°å¿ƒç¿¼ç¿¼åœ°èµ°åœ¨è¢«é›¨æ°´æµ¸æ¹¿çš„é¹…åµçŸ³å°å··ä¸­ï¼ŒçŒ«å’ªè“¬æ¾çš„æ¯›å‘è¢«ç»†é›¨æ‰“æ¹¿ï¼Œæ¯æ­¥è¸ä¸‹æ—¶è‚‰å«éƒ½åœ¨ç§¯æ°´ä¸­æ³›èµ·æ¶Ÿæ¼ªã€‚é•œå¤´ä»¥ä¿¯è§†è§’è·ŸéšçŒ«å’ªç©¿è¿‡é›¾æ°”æ°¤æ°²çš„å··é“ï¼Œä¸¤ä¾§ç –å¢™çˆ¬æ»¡é’è‹”ï¼Œè€å¼ç…¤æ°”ç¯æ™•æŸ“å‡ºæš–é»„å…‰æ–‘ã€‚çŒ«å’ªçªç„¶é©»è¶³ä»°å¤´ï¼Œèƒ¡é¡»è½»é¢¤å—…é—»ç©ºæ°”ï¼Œéšåå°è·‘æ‹è¿‡è½¬è§’ã€‚æµ…æ™¯æ·±ä¿æŒçŒ«å’ªé”åˆ©è€ŒèƒŒæ™¯è™šåŒ–ã€‚è‰²è°ƒï¼šç¥ç€é‡‘ã€ç‚­ç°ã€æ·±è“ã€‚å£°éŸ³ï¼šé›¨å£°ã€è¿œå¤„è½¦æµã€æ¹¿æ¼‰è„šæ­¥ã€‚

âœ… å¥½ç¤ºä¾‹ï¼ˆè‹±æ–‡ï¼‰ï¼š
A low-angle tracking shot captures an orange cat carefully walking down a rain-soaked cobblestone alley, its fluffy fur dampened by drizzle, paw pads creating ripples in puddles with each step. The camera follows from above through the misty passage, moss-covered brick walls flanking either side, old gas lamps casting warm amber halos. The cat suddenly halts, looks up, whiskers trembling as it sniffs the air, then trots around the corner. Shallow depth of field keeps the cat sharp while background softly blurs. Palette: amber gold, charcoal grey, deep blue. Sound: rain, distant traffic, wet footsteps.

ç°åœ¨ç›´æ¥ç”Ÿæˆæç¤ºè¯ï¼Œæ— éœ€è§£é‡Šã€‚
```

---

## å­—æ®µæ˜ å°„è§„åˆ™

### TypeScript ç±»å‹å®šä¹‰
```typescript
// lib/prompt-generator/types.ts
export interface SoraPromptInput {
  scene: string;                    // å¿…å¡« - åœºæ™¯æè¿°
  category?: string;                // å¯é€‰ - åˆ†ç±» key
  style?: string;                   // å¯é€‰ - é£æ ¼æè¿°
  duration?: string;                // å¯é€‰ - æ—¶é•¿ï¼ˆ4ç§’/8ç§’ï¼‰
  mood?: string;                    // å¯é€‰ - æ°›å›´æè¿°

  // é«˜çº§æ¨¡å¼å­—æ®µï¼ˆå¦‚æœå‰ç«¯æä¾›ï¼‰
  cameraType?: string;              // å¯é€‰ - é•œå¤´ç±»å‹
  subject?: string;                 // å¯é€‰ - ä¸»ä½“æè¿°
  actions?: string;                 // å¯é€‰ - åŠ¨ä½œæè¿°
  environment?: string;             // å¯é€‰ - ç¯å¢ƒç»†èŠ‚
  lighting?: string;                // å¯é€‰ - å…‰çº¿ç±»å‹
  cameraMovement?: string;          // å¯é€‰ - é•œå¤´è¿åŠ¨

  temperature?: number;             // å¯é€‰ - æ¸©åº¦ï¼ˆ0.7-0.9ï¼‰
  language?: 'zh' | 'en';           // å¯é€‰ - è¯­è¨€
}
```

### å­—æ®µæ‹¼æ¥è§„åˆ™
```typescript
// lib/prompt-generator/deepseek.ts

function buildUserPrompt(input: SoraPromptInput): string {
  let userPrompt = input.scene;

  const additionalInfo: string[] = [];

  // åŸºç¡€å­—æ®µï¼ˆç®€å•æ¨¡å¼ + é«˜çº§æ¨¡å¼éƒ½æœ‰ï¼‰
  if (input.style) additionalInfo.push(`é£æ ¼ï¼š${input.style}`);
  if (input.duration) additionalInfo.push(`æ—¶é•¿ï¼š${input.duration}`);
  if (input.mood) additionalInfo.push(`æ°›å›´ï¼š${input.mood}`);

  // é«˜çº§å­—æ®µï¼ˆä»…é«˜çº§æ¨¡å¼ï¼‰
  if (input.cameraType) additionalInfo.push(`é•œå¤´ç±»å‹ï¼š${input.cameraType}`);
  if (input.subject) additionalInfo.push(`ä¸»ä½“æè¿°ï¼š${input.subject}`);
  if (input.actions) additionalInfo.push(`åŠ¨ä½œæè¿°ï¼š${input.actions}`);
  if (input.environment) additionalInfo.push(`ç¯å¢ƒç»†èŠ‚ï¼š${input.environment}`);
  if (input.lighting) additionalInfo.push(`å…‰çº¿ç±»å‹ï¼š${input.lighting}`);
  if (input.cameraMovement) additionalInfo.push(`é•œå¤´è¿åŠ¨ï¼š${input.cameraMovement}`);

  // æ‹¼æ¥ï¼ˆæ–¹æ¡ˆ A - å…¨éƒ¨æ¢è¡Œæ‹¼æ¥ï¼‰
  if (additionalInfo.length > 0) {
    userPrompt += '\n\n' + additionalInfo.join('\n');
  }

  return userPrompt;
}
```

### éªŒè¯è§„åˆ™
```typescript
// app/api/prompt-generator/generate-batch/route.ts

// âœ… å¿…å¡«å­—æ®µéªŒè¯
if (!body.scene) {
  return NextResponse.json(
    { error: 'Scene description is required' },
    { status: 400 }
  );
}

// âœ… ç”Ÿæˆæ•°é‡éªŒè¯
if (![1, 3, 5].includes(count)) {
  return NextResponse.json(
    { error: 'Count must be 1, 3, or 5' },
    { status: 400 }
  );
}

// âŒ åˆ é™¤è¿™äº›éªŒè¯ï¼ˆè¿™äº›å­—æ®µåº”è¯¥æ˜¯å¯é€‰çš„ï¼‰
// if (!body.interaction) { ... }
// if (!body.environmentDetails) { ... }
```

---

## å¯¹æ¯”æ€»ç»“

| ç‰¹æ€§ | ç®€å•æ¨¡å¼ | é«˜çº§æ¨¡å¼ |
|------|---------|---------|
| **å¿…å¡«å­—æ®µ** | scene, count | scene, count |
| **å¯é€‰å­—æ®µ** | category | category, style, duration, mood, cameraType, subject, actions, environment, lighting, cameraMovement |
| **ç”¨æˆ·æç¤ºè¯é•¿åº¦** | ~50-100 å­—ç¬¦ | ~200-400 å­—ç¬¦ |
| **Token æ¶ˆè€—** | ~750-850 | ~850-950 |
| **æˆæœ¬** | ~Â¥0.009/ä¸ª | ~Â¥0.011/ä¸ª |
| **ç”Ÿæˆè´¨é‡** | ä¾èµ– AI ç†è§£åœºæ™¯ | æ›´ç²¾ç¡®æ§åˆ¶ç»†èŠ‚ |

---

## å®æ–½å»ºè®®

### éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶

1. **lib/prompt-generator/types.ts**
   - æ·»åŠ é«˜çº§æ¨¡å¼å­—æ®µå®šä¹‰ï¼ˆcameraType, subject, actions, etc.ï¼‰

2. **lib/prompt-generator/deepseek.ts**
   - æ›´æ–° buildUserPrompt å‡½æ•°ï¼Œæ”¯æŒæ‰€æœ‰é«˜çº§å­—æ®µ
   - ä¿æŒæ–¹æ¡ˆ Aï¼ˆæ¢è¡Œæ‹¼æ¥ï¼‰

3. **app/api/prompt-generator/generate-batch/route.ts**
   - **åˆ é™¤å¤šä½™çš„éªŒè¯**ï¼ˆinteraction, environmentDetails ç­‰ï¼‰
   - **åªä¿ç•™å¿…å¡«éªŒè¯**ï¼šscene, count

4. **components/prompt-generator/PromptGeneratorForm.tsx**
   - **ä¸éœ€è¦ä¿®æ”¹**ï¼ˆå·²æœ‰ç®€å•/é«˜çº§æ¨¡å¼åˆ‡æ¢ï¼‰

---

## æµ‹è¯•åœºæ™¯

### æµ‹è¯• 1: ç®€å•æ¨¡å¼
```bash
curl -X POST http://localhost:3000/api/prompt-generator/generate-batch \
  -H "Content-Type: application/json" \
  -d '{
    "scene": "ä¸€åªçŒ«ç«™åœ¨å±±é¡¶",
    "category": "naturalScenery",
    "count": 1,
    "language": "zh"
  }'
```

### æµ‹è¯• 2: é«˜çº§æ¨¡å¼ï¼ˆå®Œæ•´å­—æ®µï¼‰
```bash
curl -X POST http://localhost:3000/api/prompt-generator/generate-batch \
  -H "Content-Type: application/json" \
  -d '{
    "scene": "ä¸€åªæ©˜çŒ«åœ¨é›¨å¤©èµ°åˆ°è¡—é“ä¸Š",
    "category": "cinematicStory",
    "style": "ç”µå½±çº§ç”»è´¨ï¼Œå™äº‹æ€§å¼º",
    "duration": "8ç§’",
    "mood": "æˆå‰§æ€§ã€æƒ…æ„Ÿå…±é¸£",
    "cameraType": "å…¨æ™¯",
    "subject": "æ©˜è‰²è™æ–‘çŒ«",
    "actions": "å°å¿ƒç¿¼ç¿¼åœ°èµ°è·¯",
    "environment": "è¢«é›¨æ°´æµ¸æ¹¿çš„é¹…åµçŸ³å°å··",
    "lighting": "è€å¼ç…¤æ°”ç¯æš–é»„å…‰",
    "cameraMovement": "ä½è§’åº¦è·Ÿè¸ª",
    "count": 3,
    "language": "zh"
  }'
```

---

## é—®é¢˜ä¸ç¡®è®¤

### â“ éœ€è¦ç¡®è®¤çš„é—®é¢˜

1. **é«˜çº§å­—æ®µæ˜¯å¦å®Œæ•´ï¼Ÿ**
   - æ ¹æ®ä½ çš„æˆªå›¾ï¼Œå‰ç«¯æ˜¯å¦è¿˜æœ‰å…¶ä»–å­—æ®µï¼ˆæ¯”å¦‚ï¼šæ™¯åˆ«ã€éŸ³æ•ˆã€åæœŸå¤„ç†ç­‰ï¼‰ï¼Ÿ

2. **å­—æ®µæ‹¼æ¥æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼Ÿ**
   - å½“å‰æ–¹æ¡ˆ Aï¼š`é•œå¤´ç±»å‹ï¼šå…¨æ™¯\nä¸»ä½“æè¿°ï¼šXXX\nåŠ¨ä½œæè¿°ï¼šXXX`
   - æ˜¯å¦éœ€è¦æ”¹æˆï¼š`é•œå¤´ç±»å‹ï¼šå…¨æ™¯ã€ä¸»ä½“æè¿°ï¼šXXXã€åŠ¨ä½œæè¿°ï¼šXXX`ï¼ˆç”¨é¡¿å·ï¼‰ï¼Ÿ

3. **éªŒè¯è§„åˆ™æ˜¯å¦æ­£ç¡®ï¼Ÿ**
   - åªéªŒè¯ scene å’Œ count æ˜¯å¦è¶³å¤Ÿï¼Ÿ

4. **ç³»ç»Ÿæç¤ºè¯æ˜¯å¦éœ€è¦è°ƒæ•´ï¼Ÿ**
   - å½“å‰æç¤ºè¯æ˜¯å¦èƒ½å¾ˆå¥½åœ°å¤„ç†é«˜çº§æ¨¡å¼çš„è¯¦ç»†å­—æ®µï¼Ÿ

---

## ä¸‹ä¸€æ­¥

âœ… è¯·ç¡®è®¤ä»¥ä¸Šæ–¹æ¡ˆåï¼Œæˆ‘å°†ï¼š
1. æ›´æ–° TypeScript ç±»å‹å®šä¹‰
2. ä¿®æ”¹ buildUserPrompt å‡½æ•°
3. åˆ é™¤å¤šä½™çš„åç«¯éªŒè¯
4. è¿è¡Œæµ‹è¯•ç¡®ä¿å·¥ä½œæ­£å¸¸

ğŸ“Œ **è¯·ç¡®è®¤**ï¼šè¿™ä¸ªæ–¹æ¡ˆæ˜¯å¦ç¬¦åˆä½ çš„éœ€æ±‚ï¼Ÿæœ‰æ²¡æœ‰éœ€è¦è°ƒæ•´çš„åœ°æ–¹ï¼Ÿ
