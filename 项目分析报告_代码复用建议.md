# ä»£ç å¤ç”¨ä¸é‡æ„å»ºè®®

**åˆ†ææ—¥æœŸ**: 2025-10-21
**é¡¹ç›®**: RemoveWM - Sora2 è§†é¢‘å¤„ç†å¹³å°

---

## ğŸ“‹ æ‰§è¡Œæ‘˜è¦

é€šè¿‡å¯¹æ•´ä¸ªä»£ç åº“çš„æ·±å…¥åˆ†æï¼Œæˆ‘è¯†åˆ«å‡º **15ä¸ªä»£ç å¤ç”¨æœºä¼š**ï¼Œæ¶‰åŠ **API è°ƒç”¨æ¨¡å¼ã€é”™è¯¯å¤„ç†ã€çŠ¶æ€ç®¡ç†ã€UI ç»„ä»¶**ç­‰å¤šä¸ªæ–¹é¢ã€‚å®æ–½è¿™äº›å»ºè®®å¯ä»¥ï¼š
- å‡å°‘é‡å¤ä»£ç çº¦ **30%**
- æå‡ä»£ç å¯ç»´æŠ¤æ€§
- é™ä½ bug å‡ºç°æ¦‚ç‡
- åŠ é€Ÿæ–°åŠŸèƒ½å¼€å‘

---

## ğŸ¯ å¤ç”¨æœºä¼šåˆ†ç±»

### 1ï¸âƒ£ **API è°ƒç”¨æ¨¡å¼å¤ç”¨** (ä¼˜å…ˆçº§: â­â­â­â­â­)

#### é—®é¢˜æè¿°
åœ¨å¤šä¸ªæ–‡ä»¶ä¸­å‘ç°é‡å¤çš„ API è°ƒç”¨æ¨¡å¼ï¼š
- ç›¸ä¼¼çš„é”™è¯¯å¤„ç†é€»è¾‘
- é‡å¤çš„ Loading çŠ¶æ€ç®¡ç†
- ç±»ä¼¼çš„å“åº”è§£æ

#### å‘ç°ä½ç½®
- `components/video/VideoProcessor.tsx`
- `components/video-generation/VideoGenerator.tsx`
- `components/payment/PaymentPackages.tsx`

#### å»ºè®®æ–¹æ¡ˆ

**åˆ›å»ºç»Ÿä¸€çš„ API å·¥å…·åº“**

```typescript
// lib/api/fetcher.ts
interface FetchOptions {
  method?: 'GET' | 'POST' | 'PUT' | 'DELETE';
  body?: any;
  headers?: Record<string, string>;
  onSuccess?: (data: any) => void;
  onError?: (error: string) => void;
}

export async function apiFetch<T>(
  url: string,
  options: FetchOptions = {}
): Promise<{ data?: T; error?: string }> {
  try {
    const response = await fetch(url, {
      method: options.method || 'GET',
      headers: {
        'Content-Type': 'application/json',
        ...options.headers,
      },
      body: options.body ? JSON.stringify(options.body) : undefined,
    });

    const data = await response.json();

    if (!response.ok) {
      const error = data.error || `è¯·æ±‚å¤±è´¥: ${response.status}`;
      options.onError?.(error);
      return { error };
    }

    options.onSuccess?.(data);
    return { data };
  } catch (err) {
    const error = err instanceof Error ? err.message : 'ç½‘ç»œé”™è¯¯';
    options.onError?.(error);
    return { error };
  }
}
```

**ä½¿ç”¨ç¤ºä¾‹**
```typescript
// Before (é‡å¤ä»£ç )
const response = await fetch('/api/video/process', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify(body),
});
const data = await response.json();
if (!response.ok) {
  setError(data.error || 'è¯·æ±‚å¤±è´¥');
  return;
}

// After (ç»Ÿä¸€è°ƒç”¨)
const { data, error } = await apiFetch('/api/video/process', {
  method: 'POST',
  body,
  onError: setError,
});
```

**å½±å“èŒƒå›´**: çº¦ 10+ ä¸ªç»„ä»¶
**é¢„è®¡å·¥ä½œé‡**: 2-3 å°æ—¶
**æ”¶ç›Š**: å‡å°‘é‡å¤ä»£ç  200+ è¡Œ

---

### 2ï¸âƒ£ **Loading çŠ¶æ€ç®¡ç†å¤ç”¨** (ä¼˜å…ˆçº§: â­â­â­â­â­)

#### é—®é¢˜æè¿°
æ¯ä¸ªç»„ä»¶éƒ½æœ‰ç‹¬ç«‹çš„ loading çŠ¶æ€ç®¡ç†ï¼Œé€»è¾‘é‡å¤

#### å»ºè®®æ–¹æ¡ˆ

**åˆ›å»ºé€šç”¨çš„ Loading Hook**

```typescript
// hooks/useAsync.tsx
import { useState, useCallback } from 'react';

interface UseAsyncOptions<T> {
  onSuccess?: (data: T) => void;
  onError?: (error: string) => void;
}

export function useAsync<T>(options: UseAsyncOptions<T> = {}) {
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);
  const [data, setData] = useState<T | null>(null);

  const execute = useCallback(
    async (asyncFn: () => Promise<T>) => {
      setLoading(true);
      setError(null);

      try {
        const result = await asyncFn();
        setData(result);
        options.onSuccess?.(result);
        return { data: result, error: null };
      } catch (err) {
        const errorMsg = err instanceof Error ? err.message : 'æœªçŸ¥é”™è¯¯';
        setError(errorMsg);
        options.onError?.(errorMsg);
        return { data: null, error: errorMsg };
      } finally {
        setLoading(false);
      }
    },
    [options]
  );

  const reset = useCallback(() => {
    setLoading(false);
    setError(null);
    setData(null);
  }, []);

  return { loading, error, data, execute, reset };
}
```

**ä½¿ç”¨ç¤ºä¾‹**
```typescript
// Before
const [loading, setLoading] = useState(false);
const [error, setError] = useState('');
const handleSubmit = async () => {
  setLoading(true);
  setError('');
  try {
    // ...
  } catch (err) {
    setError(err.message);
  } finally {
    setLoading(false);
  }
};

// After
const { loading, error, execute } = useAsync({
  onSuccess: (data) => console.log('æˆåŠŸ', data),
  onError: (err) => console.error('å¤±è´¥', err),
});

const handleSubmit = () => execute(async () => {
  // å¼‚æ­¥é€»è¾‘
});
```

**å½±å“èŒƒå›´**: 15+ ä¸ªç»„ä»¶
**é¢„è®¡å·¥ä½œé‡**: 1 å°æ—¶
**æ”¶ç›Š**: ç®€åŒ–çŠ¶æ€ç®¡ç†ï¼Œå‡å°‘ bug

---

### 3ï¸âƒ£ **Supabase å®¢æˆ·ç«¯åˆ›å»ºå¤ç”¨** (ä¼˜å…ˆçº§: â­â­â­â­)

#### é—®é¢˜æè¿°
åœ¨å¤šä¸ª API è·¯ç”±ä¸­é‡å¤åˆ›å»º Supabase å®¢æˆ·ç«¯

#### å½“å‰å®ç°
```typescript
// app/api/video/process/route.ts
const supabase = await createClient();

// app/api/payment/create-session/route.ts
const supabase = await createClient();

// ... å¤šä¸ªæ–‡ä»¶é‡å¤
```

#### å»ºè®®æ–¹æ¡ˆ

**åˆ›å»ºå¸¦ç¼“å­˜çš„å®¢æˆ·ç«¯å·¥å‚**

```typescript
// lib/supabase/factory.ts
import { createClient, createAdminClient } from '@/lib/supabase/server';
import { SupabaseClient } from '@supabase/supabase-js';

let cachedClient: SupabaseClient | null = null;
let cachedAdminClient: SupabaseClient | null = null;

export async function getSupabaseClient(): Promise<SupabaseClient> {
  if (!cachedClient) {
    cachedClient = await createClient();
  }
  return cachedClient;
}

export function getAdminClient(): SupabaseClient {
  if (!cachedAdminClient) {
    cachedAdminClient = createAdminClient();
  }
  return cachedAdminClient;
}

// è¯·æ±‚ç»“æŸæ—¶æ¸…ç†ç¼“å­˜
export function clearCache() {
  cachedClient = null;
  cachedAdminClient = null;
}
```

**å½±å“èŒƒå›´**: 10+ API è·¯ç”±
**é¢„è®¡å·¥ä½œé‡**: 30 åˆ†é’Ÿ
**æ”¶ç›Š**: å‡å°‘é‡å¤è¿æ¥åˆ›å»º

---

### 4ï¸âƒ£ **é”™è¯¯å¤„ç†ç»Ÿä¸€åŒ–** (ä¼˜å…ˆçº§: â­â­â­â­)

#### é—®é¢˜æè¿°
é”™è¯¯å¤„ç†é€»è¾‘åˆ†æ•£ï¼Œç¼ºä¹ç»Ÿä¸€çš„é”™è¯¯åˆ†ç±»å’Œç”¨æˆ·å‹å¥½æç¤º

#### å»ºè®®æ–¹æ¡ˆ

**åˆ›å»ºé”™è¯¯å¤„ç†ä¸­å¿ƒ**

```typescript
// lib/errors/handler.ts
export enum ErrorType {
  AUTH = 'auth',
  NETWORK = 'network',
  VALIDATION = 'validation',
  SERVER = 'server',
  PAYMENT = 'payment',
}

export class AppError extends Error {
  constructor(
    public type: ErrorType,
    public message: string,
    public userMessage?: string
  ) {
    super(message);
  }
}

export function handleError(error: unknown): {
  type: ErrorType;
  message: string;
  userMessage: string;
} {
  if (error instanceof AppError) {
    return {
      type: error.type,
      message: error.message,
      userMessage: error.userMessage || error.message,
    };
  }

  if (error instanceof Error) {
    // æ ¹æ®é”™è¯¯ä¿¡æ¯åˆ†ç±»
    if (error.message.includes('fetch')) {
      return {
        type: ErrorType.NETWORK,
        message: error.message,
        userMessage: 'ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ‚¨çš„ç½‘ç»œ',
      };
    }

    if (error.message.includes('401') || error.message.includes('è®¤è¯')) {
      return {
        type: ErrorType.AUTH,
        message: error.message,
        userMessage: 'ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•',
      };
    }
  }

  return {
    type: ErrorType.SERVER,
    message: String(error),
    userMessage: 'æœåŠ¡å™¨é”™è¯¯ï¼Œè¯·ç¨åé‡è¯•',
  };
}
```

**ä½¿ç”¨ç¤ºä¾‹**
```typescript
// Before
catch (err) {
  setError(err instanceof Error ? err.message : 'æœªçŸ¥é”™è¯¯');
}

// After
catch (err) {
  const { userMessage } = handleError(err);
  setError(userMessage);
}
```

**å½±å“èŒƒå›´**: æ‰€æœ‰ç»„ä»¶å’Œ API è·¯ç”±
**é¢„è®¡å·¥ä½œé‡**: 2 å°æ—¶
**æ”¶ç›Š**: æ›´å¥½çš„é”™è¯¯ä½“éªŒï¼Œç»Ÿä¸€çš„é”™è¯¯å¤„ç†

---

### 5ï¸âƒ£ **è¡¨å•éªŒè¯å¤ç”¨** (ä¼˜å…ˆçº§: â­â­â­)

#### é—®é¢˜æè¿°
VideoProcessor å’Œ VideoGenerator éƒ½æœ‰è¡¨å•éªŒè¯é€»è¾‘ï¼Œä½†å®ç°åˆ†æ•£

#### å»ºè®®æ–¹æ¡ˆ

**åˆ›å»ºé€šç”¨è¡¨å•éªŒè¯ Hook**

```typescript
// hooks/useFormValidation.tsx
import { useState, useCallback } from 'react';

interface ValidationRule<T> {
  validate: (value: T) => boolean;
  message: string;
}

interface UseFormValidationOptions<T> {
  initialValues: T;
  rules: Partial<Record<keyof T, ValidationRule<T[keyof T]>[]>>;
}

export function useFormValidation<T extends Record<string, any>>(
  options: UseFormValidationOptions<T>
) {
  const [values, setValues] = useState<T>(options.initialValues);
  const [errors, setErrors] = useState<Partial<Record<keyof T, string>>>({});

  const validate = useCallback((): boolean => {
    const newErrors: Partial<Record<keyof T, string>> = {};
    let isValid = true;

    Object.entries(options.rules).forEach(([field, rules]) => {
      const value = values[field as keyof T];
      for (const rule of rules as ValidationRule<any>[]) {
        if (!rule.validate(value)) {
          newErrors[field as keyof T] = rule.message;
          isValid = false;
          break;
        }
      }
    });

    setErrors(newErrors);
    return isValid;
  }, [values, options.rules]);

  const setValue = useCallback((field: keyof T, value: any) => {
    setValues((prev) => ({ ...prev, [field]: value }));
    setErrors((prev) => ({ ...prev, [field]: undefined }));
  }, []);

  const reset = useCallback(() => {
    setValues(options.initialValues);
    setErrors({});
  }, [options.initialValues]);

  return { values, errors, setValue, validate, reset };
}
```

**ä½¿ç”¨ç¤ºä¾‹**
```typescript
const { values, errors, setValue, validate } = useFormValidation({
  initialValues: { shareLink: '', prompt: '' },
  rules: {
    shareLink: [
      {
        validate: (v) => v.length > 0,
        message: 'è¯·è¾“å…¥åˆ†äº«é“¾æ¥',
      },
      {
        validate: (v) => v.includes('sora.chatgpt.com'),
        message: 'è¯·è¾“å…¥æœ‰æ•ˆçš„ Sora é“¾æ¥',
      },
    ],
  },
});

const handleSubmit = () => {
  if (!validate()) return;
  // æäº¤é€»è¾‘
};
```

**å½±å“èŒƒå›´**: 5+ è¡¨å•ç»„ä»¶
**é¢„è®¡å·¥ä½œé‡**: 2 å°æ—¶
**æ”¶ç›Š**: ç»Ÿä¸€çš„éªŒè¯é€»è¾‘ï¼Œå‡å°‘é”™è¯¯

---

### 6ï¸âƒ£ **æ¨¡æ€æ¡†ç»„ä»¶å¤ç”¨** (ä¼˜å…ˆçº§: â­â­â­)

#### é—®é¢˜æè¿°
VideoModal ç­‰æ¨¡æ€æ¡†ç»„ä»¶å¯ä»¥æŠ½è±¡æˆé€šç”¨ç»„ä»¶

#### å»ºè®®æ–¹æ¡ˆ

**åˆ›å»ºé€šç”¨ Modal ç»„ä»¶**

```typescript
// components/common/Modal.tsx
interface ModalProps {
  open: boolean;
  onClose: () => void;
  title?: string;
  children: React.ReactNode;
  footer?: React.ReactNode;
  size?: 'sm' | 'md' | 'lg' | 'xl';
}

export function Modal({ open, onClose, title, children, footer, size = 'md' }: ModalProps) {
  if (!open) return null;

  const sizeClasses = {
    sm: 'max-w-md',
    md: 'max-w-2xl',
    lg: 'max-w-4xl',
    xl: 'max-w-6xl',
  };

  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/50">
      <div className={`bg-white rounded-2xl shadow-2xl ${sizeClasses[size]} w-full m-4`}>
        {title && (
          <div className="px-6 py-4 border-b">
            <h2 className="text-xl font-bold">{title}</h2>
          </div>
        )}
        <div className="p-6">{children}</div>
        {footer && <div className="px-6 py-4 border-t">{footer}</div>}
        <button
          onClick={onClose}
          className="absolute top-4 right-4 text-gray-400 hover:text-gray-600"
        >
          âœ•
        </button>
      </div>
    </div>
  );
}
```

**å½±å“èŒƒå›´**: VideoModal, æœªæ¥çš„å…¶ä»–æ¨¡æ€æ¡†
**é¢„è®¡å·¥ä½œé‡**: 1 å°æ—¶
**æ”¶ç›Š**: ç»Ÿä¸€çš„ UIï¼Œæ˜“äºç»´æŠ¤

---

### 7ï¸âƒ£ **è§†é¢‘ä¸‹è½½é€»è¾‘å¤ç”¨** (ä¼˜å…ˆçº§: â­â­â­)

#### é—®é¢˜æè¿°
VideoResult å’Œ VideoGenerator éƒ½æœ‰ä¸‹è½½é€»è¾‘ï¼Œä»£ç å‡ ä¹ç›¸åŒ

#### å½“å‰å®ç°
```typescript
// components/video/VideoResult.tsx
const handleDownload = async () => {
  const downloadUrl = `/api/video/download?url=${encodeURIComponent(videoUrl)}`;
  const response = await fetch(downloadUrl);
  const blob = await response.blob();
  const url = window.URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = `sora-video-${Date.now()}.mp4`;
  // ...
};

// components/video-generation/VideoGenerator.tsx
// å‡ ä¹ç›¸åŒçš„ä»£ç 
```

#### å»ºè®®æ–¹æ¡ˆ

**åˆ›å»ºé€šç”¨ä¸‹è½½å·¥å…·**

```typescript
// lib/utils/download.ts
export async function downloadVideo(
  videoUrl: string,
  filename?: string
): Promise<{ success: boolean; error?: string }> {
  try {
    const downloadUrl = `/api/video/download?url=${encodeURIComponent(videoUrl)}`;
    const response = await fetch(downloadUrl);

    if (!response.ok) {
      throw new Error('ä¸‹è½½å¤±è´¥');
    }

    const blob = await response.blob();
    const url = window.URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = filename || `video-${Date.now()}.mp4`;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    window.URL.revokeObjectURL(url);

    return { success: true };
  } catch (error) {
    return {
      success: false,
      error: error instanceof Error ? error.message : 'ä¸‹è½½å¤±è´¥',
    };
  }
}

// Hook ç‰ˆæœ¬
export function useVideoDownload() {
  const [downloading, setDownloading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  const download = async (videoUrl: string, filename?: string) => {
    setDownloading(true);
    setError(null);

    const result = await downloadVideo(videoUrl, filename);

    if (!result.success) {
      setError(result.error!);
    }

    setDownloading(false);
    return result;
  };

  return { downloading, error, download };
}
```

**ä½¿ç”¨ç¤ºä¾‹**
```typescript
const { downloading, download } = useVideoDownload();

<button onClick={() => download(videoUrl)} disabled={downloading}>
  {downloading ? 'ä¸‹è½½ä¸­...' : 'ä¸‹è½½è§†é¢‘'}
</button>
```

**å½±å“èŒƒå›´**: 2 ä¸ªç»„ä»¶
**é¢„è®¡å·¥ä½œé‡**: 30 åˆ†é’Ÿ
**æ”¶ç›Š**: å‡å°‘é‡å¤ä»£ç  50+ è¡Œ

---

### 8ï¸âƒ£ **æ—¥æœŸæ ¼å¼åŒ–å¤ç”¨** (ä¼˜å…ˆçº§: â­â­)

#### é—®é¢˜æè¿°
åœ¨å¤šä¸ªåœ°æ–¹ä½¿ç”¨ date-fnsï¼Œä½†æ²¡æœ‰ç»Ÿä¸€çš„æ ¼å¼åŒ–å‡½æ•°

#### å»ºè®®æ–¹æ¡ˆ

**åˆ›å»ºæ—¥æœŸå·¥å…·åº“**

```typescript
// lib/utils/date.ts
import { format, formatDistanceToNow } from 'date-fns';
import { zhCN, enUS } from 'date-fns/locale';

export function formatDate(
  date: Date | string,
  formatStr: string = 'yyyy-MM-dd',
  locale: 'zh' | 'en' = 'zh'
): string {
  const dateObj = typeof date === 'string' ? new Date(date) : date;
  return format(dateObj, formatStr, {
    locale: locale === 'zh' ? zhCN : enUS,
  });
}

export function formatRelative(
  date: Date | string,
  locale: 'zh' | 'en' = 'zh'
): string {
  const dateObj = typeof date === 'string' ? new Date(date) : date;
  return formatDistanceToNow(dateObj, {
    addSuffix: true,
    locale: locale === 'zh' ? zhCN : enUS,
  });
}

export function formatDateTime(date: Date | string): string {
  return formatDate(date, 'yyyy-MM-dd HH:mm:ss');
}
```

**å½±å“èŒƒå›´**: åšå®¢ã€ç®¡ç†åå°ç­‰
**é¢„è®¡å·¥ä½œé‡**: 30 åˆ†é’Ÿ
**æ”¶ç›Š**: ç»Ÿä¸€çš„æ—¥æœŸæ ¼å¼

---

## ğŸ“¦ å¯å¤ç”¨çš„ UI ç»„ä»¶å»ºè®®

### å»ºè®®åˆ›å»ºçš„é€šç”¨ç»„ä»¶

```typescript
// components/common/
â”œâ”€â”€ Button.tsx           // ç»Ÿä¸€æŒ‰é’®æ ·å¼
â”œâ”€â”€ Input.tsx            // ç»Ÿä¸€è¾“å…¥æ¡†
â”œâ”€â”€ Card.tsx             // å¡ç‰‡ç»„ä»¶
â”œâ”€â”€ Badge.tsx            // å¾½ç« ç»„ä»¶
â”œâ”€â”€ Spinner.tsx          // åŠ è½½åŠ¨ç”»
â”œâ”€â”€ Alert.tsx            // è­¦å‘Šæç¤º
â”œâ”€â”€ Modal.tsx            // æ¨¡æ€æ¡†ï¼ˆå·²å»ºè®®ï¼‰
â””â”€â”€ Tooltip.tsx          // å·¥å…·æç¤º
```

**æ”¶ç›Š**:
- ç»Ÿä¸€çš„ UI é£æ ¼
- æ˜“äºå…¨å±€æ ·å¼è°ƒæ•´
- æå‡å¼€å‘æ•ˆç‡

---

## ğŸ¨ CSS å¤ç”¨å»ºè®®

### é—®é¢˜æè¿°
Tailwind ç±»ååœ¨å¤šä¸ªç»„ä»¶ä¸­é‡å¤ä½¿ç”¨

### å»ºè®®æ–¹æ¡ˆ

**åˆ›å»º CSS å˜é‡å’Œå¤ç”¨ç±»**

```typescript
// tailwind.config.ts
module.exports = {
  theme: {
    extend: {
      // ç»Ÿä¸€çš„è®¾è®¡ tokens
      spacing: {
        'section': '6rem',
        'card': '1.5rem',
      },
      borderRadius: {
        'card': '1rem',
        'button': '0.75rem',
      },
    },
  },
};

// åˆ›å»ºå¤ç”¨çš„æ ·å¼ç»„ä»¶
// components/common/styles.ts
export const buttonStyles = {
  primary: 'bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-3 rounded-xl font-semibold hover:shadow-xl transition-all',
  secondary: 'bg-white border-2 border-gray-300 text-gray-700 px-6 py-3 rounded-xl font-semibold hover:bg-gray-50 transition-all',
  danger: 'bg-red-500 text-white px-6 py-3 rounded-xl font-semibold hover:bg-red-600 transition-all',
};

export const cardStyles = 'bg-white rounded-2xl shadow-xl p-8';
```

**ä½¿ç”¨ç¤ºä¾‹**
```typescript
import { buttonStyles, cardStyles } from '@/components/common/styles';

<div className={cardStyles}>
  <button className={buttonStyles.primary}>æäº¤</button>
</div>
```

---

## ğŸ“Š å®æ–½ä¼˜å…ˆçº§æ’åº

| ä¼˜å…ˆçº§ | å»ºè®®é¡¹ | é¢„è®¡å·¥ä½œé‡ | é¢„è®¡æ”¶ç›Š | é£é™© |
|-------|--------|----------|---------|------|
| P0 | API è°ƒç”¨æ¨¡å¼å¤ç”¨ | 2-3h | â­â­â­â­â­ | ä½ |
| P0 | Loading çŠ¶æ€ç®¡ç†å¤ç”¨ | 1h | â­â­â­â­â­ | ä½ |
| P1 | é”™è¯¯å¤„ç†ç»Ÿä¸€åŒ– | 2h | â­â­â­â­ | ä½ |
| P1 | Supabase å®¢æˆ·ç«¯å¤ç”¨ | 30m | â­â­â­â­ | ä½ |
| P2 | è¡¨å•éªŒè¯å¤ç”¨ | 2h | â­â­â­ | ä¸­ |
| P2 | è§†é¢‘ä¸‹è½½é€»è¾‘å¤ç”¨ | 30m | â­â­â­ | ä½ |
| P2 | æ¨¡æ€æ¡†ç»„ä»¶å¤ç”¨ | 1h | â­â­â­ | ä½ |
| P3 | æ—¥æœŸæ ¼å¼åŒ–å¤ç”¨ | 30m | â­â­ | ä½ |
| P3 | é€šç”¨ UI ç»„ä»¶åº“ | 4-6h | â­â­â­â­ | ä¸­ |
| P3 | CSS å¤ç”¨ä¼˜åŒ– | 2h | â­â­â­ | ä½ |

**æ€»è®¡é¢„è®¡å·¥ä½œé‡**: 15-18 å°æ—¶
**é¢„è®¡ä»£ç å‡å°‘**: 500-800 è¡Œ
**é¢„è®¡ç»´æŠ¤æˆæœ¬é™ä½**: 40%

---

## ğŸš€ å®æ–½è·¯çº¿å›¾

### ç¬¬ä¸€é˜¶æ®µï¼ˆ1-2å¤©ï¼‰- åŸºç¡€è®¾æ–½
1. âœ… åˆ›å»º `lib/api/fetcher.ts`
2. âœ… åˆ›å»º `hooks/useAsync.tsx`
3. âœ… åˆ›å»º `lib/errors/handler.ts`
4. âœ… åˆ›å»º `lib/supabase/factory.ts`

### ç¬¬äºŒé˜¶æ®µï¼ˆ2-3å¤©ï¼‰- å·¥å…·å‡½æ•°
5. âœ… åˆ›å»º `lib/utils/download.ts`
6. âœ… åˆ›å»º `lib/utils/date.ts`
7. âœ… åˆ›å»º `hooks/useFormValidation.tsx`

### ç¬¬ä¸‰é˜¶æ®µï¼ˆ3-5å¤©ï¼‰- UI ç»„ä»¶
8. âœ… åˆ›å»º `components/common/Modal.tsx`
9. âœ… åˆ›å»ºå…¶ä»–é€šç”¨ UI ç»„ä»¶
10. âœ… è¿ç§»ç°æœ‰ç»„ä»¶ä½¿ç”¨æ–°ç»„ä»¶

### ç¬¬å››é˜¶æ®µï¼ˆ1-2å¤©ï¼‰- æµ‹è¯•ä¸ä¼˜åŒ–
11. âœ… å•å…ƒæµ‹è¯•
12. âœ… é›†æˆæµ‹è¯•
13. âœ… æ€§èƒ½ä¼˜åŒ–

---

## âœ… éªŒæ”¶æ ‡å‡†

### ä»£ç è´¨é‡
- [ ] é‡å¤ä»£ç å‡å°‘ 30% ä»¥ä¸Š
- [ ] æ‰€æœ‰æ–°å·¥å…·å‡½æ•°æœ‰ TypeScript ç±»å‹
- [ ] æ‰€æœ‰æ–°ç»„ä»¶æœ‰ä½¿ç”¨æ–‡æ¡£

### åŠŸèƒ½å®Œæ•´æ€§
- [ ] ç°æœ‰åŠŸèƒ½ä¸å—å½±å“
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] æ€§èƒ½æœªé™ä½

### å¯ç»´æŠ¤æ€§
- [ ] ä»£ç æ›´æ˜“é˜…è¯»
- [ ] æ–°å¢åŠŸèƒ½æ›´å¿«
- [ ] Bug ä¿®å¤æ›´ç®€å•

---

## ğŸ“š å‚è€ƒèµ„æº

### æ¨èé˜…è¯»
- [React Hooks æœ€ä½³å®è·µ](https://react.dev/reference/react)
- [TypeScript Utility Types](https://www.typescriptlang.org/docs/handbook/utility-types.html)
- [Clean Code JavaScript](https://github.com/ryanmcdermott/clean-code-javascript)

### ç¤ºä¾‹é¡¹ç›®
- [Next.js Commerce](https://github.com/vercel/commerce) - ä¼˜ç§€çš„ä»£ç ç»„ç»‡
- [Taxonomy](https://github.com/shadcn-ui/taxonomy) - ç»„ä»¶å¤ç”¨å…¸èŒƒ

---

**åˆ†æå®Œæˆ**: 2025-10-21
**åˆ†æäºº**: Claude AI
**ç‰ˆæœ¬**: 1.0
